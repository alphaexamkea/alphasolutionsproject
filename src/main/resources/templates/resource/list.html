<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Resources</title>
  <link rel="stylesheet" th:href="@{/css/main.css}">
</head>
<body>
<div th:replace="~{shared/header :: header}"></div>

<main>
  <div class="container">
    <div class="resources-header">
      <div class="resources-title-section">
        <h1>Resources</h1>
        <p class="resources-subtitle">Manage team members and their system access.</p>
      </div>
      <a href="/resources/new" class="btn btn-primary">+ New Resource</a>
    </div>

    <div class="resources-list" th:if="${!resources.isEmpty()}">
      <div class="resource-card" th:each="res : ${resources}">
        <div class="resource-card-content">
          <div class="resource-header">
            <h3 class="resource-title">
              <a th:href="@{/resources/{id}(id=${res.resourceId})}" th:text="${res.name}"></a>
            </h3>
            <div class="resource-system-role">
                            <span class="status-badge"
                                  th:classappend="${res.systemRole == 'ADMIN' ? 'status-warning' : 'status-info'}"
                                  th:text="${res.systemRole}"></span>
            </div>
          </div>

          <div class="resource-details">
            <div class="resource-info">
              <div class="resource-meta">
                <div class="meta-item">
                  <span class="meta-label">Role</span>
                  <span class="meta-value" th:text="${res.role}"></span>
                </div>
                <span class="meta-separator">•</span>
                <div class="meta-item">
                  <span class="meta-label">Username</span>
                  <span class="meta-value" th:text="${res.username}"></span>
                </div>
                <span class="meta-separator">•</span>
                <div class="meta-item">
                  <span class="meta-label">ID</span>
                  <span class="meta-value" th:text="${res.resourceId}"></span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="resource-actions">
          <a th:href="@{/resources/{id}/edit(id=${res.resourceId})}" class="link-subtle">Edit</a>
          <a th:href="@{/resources/{id}/delete(id=${res.resourceId})}"
             class="link-subtle link-danger"
             onclick="return confirm('Are you sure you want to delete this resource?')">Delete</a>
        </div>
      </div>
    </div>

    <div class="empty-message" th:if="${resources.isEmpty()}">
      <p>No resources found.</p>
      <a href="/resources/new" class="link-action">Add your first resource</a>
    </div>
  </div>
</main>
</body>
</html>
